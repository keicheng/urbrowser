;(function(){'use strict';var a={root:document.documentElement,getUA:navigator.userAgent.toLowerCase(),getPF:navigator.platform.toLowerCase(),isBuiltInApp:!1,breakpoints:{xs:0,sm:576,md:768,lg:992,xl:1200},script:document.currentScript||document.querySelector('#urbrowser')||document.querySelector('script[src*="urbrowser"]'),docSize:{width:function width(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function height(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},scrSize:{width:function width(){return screen.width},height:function height(){return screen.height}},cache:{},classes:[],originClasses:null,res:{},getNameByAgent:function getNameByAgent(){var d=this.getUA,e=d.match(/msie|iemobile|line|fbav|twitter|micromessenger|mms|miuibrowser|samsungbrowser|focus|acheetahi|ucbrowser|yabrowser|yolobrowser|firefox|fxios|puffin|mxbrowser|mxios|alohabrowser|kakaotalk|coast|beetalk|vivaldi|cordova|phonegap|react|nodejs|webview/i);return this.isBuiltInApp=/line|fbav|twitter|micromessenger|kakaotalk|beetalk|cordova|phonegap|react|nodejs|webview/.test(d),e instanceof Array?e[0]:/(?=.*windows)(?=.*rv:)/.test(d)?'rv':/op(r|era|ios|t)/.test(d)?d.match(/op(r|ios|t)/i)?d.match(/op(r|ios|t)/i)[0]:'version':!!/applewebkit/.test(d)&&(/edge/.test(d)?'edge':/chrome/.test(d)?'chrome':/crios/.test(d)?'crios':/version/.test(d)?'version':'safari')},getBrowserVersionByName:function getBrowserVersionByName(){var d=this.getUA,e=this.res.getNameByAgent,f;if(e){var g=e.length,h=d.substr(d.indexOf(e)+g+1,20),j=/[\d\.]*/g;return f=h.match(j)[0],{int:parseInt(f,10),full:f}}},getBrowserWithCoreName:function getBrowserWithCoreName(){var d=this.getUA,e=this.res.getNameByAgent,f=e?e.match(/line|fbav|twitter|kakaotalk|micromessenger|beetalk|samsungbrowser|focus|acheetahi|alohabrowser|yabrowser|yolobrowser|mxbrowser|mxios|fxios/i):null,g='webkit',h=e?e:'unknown',j=this.res.getBrowserVersionByName.int,k='';if(f)h=f[0],h='fbav'===h?'facebook':'samsungbrowser'===h?'samsung':'alohabrowser'===h?'aloha':'yabrowser'===h?'yandex':'yolobrowser'===h?'yolo':'mxbrowser'===h||'mxios'===h?'maxthon':'acheetahi'===h?'armorfly':'fxios'===h?h+' firefox':h,j='twitter'===h?null:j;else switch(!0){case /firefox/.test(e):g=/gecko/.test(d)?'gecko':'webkit';break;case /miuibrowser/.test(e):h='miui';break;case /opr|opera|opios|opt|coast|mms/.test(e):h='opera',k='coast'===e?'coast':'mms'===e?'opera-neon':'',g=/applewebkit/.test(d)?'webkit':'presto';break;case /version|chrome|crios|safari/.test(e):h='edge'===e?'edge':'chrome'===e||'crios'===e?'chrome':'version'===e&&/android/.test(d)?'adrBuiltin':'safari';break;case /msie|rv|iemobile/.test(e):g='ie',h='';break;default:var l=e.match(/cordova|phonegap|react|nodejs|webview/i);g='webkit',l?(-1===d.indexOf('-android')?-1!==d.indexOf('-ios')&&(h=l+'-ios '+l):h=l+'-adr '+l,j=null):/iemobile|msie/.test(d)?g='ie':/applewebkit/.test(d)&&(/chrome|crios/.test(d)?k='chrome':/version/.test(d)?k+=/android/.test(d)?' adrBuiltin':' safari':k+='safari');}k=/chrome/.test(d)&&!/chrome/.test(k)&&k.length?'chrome':k,k=/^edge$/.test(h)?'':k;var m=h?h.split(' '):null,o=(m?m[0]:g)+j,p=(h?h:'')+(o?' '+o:'')+(k?' '+k:'')+(g?' '+g:'');return{origin:h?h:g,name:o,core:g,addon:k,full:p.trim()}},getPlatform:function getPlatform(){var d=this.getUA,e=this.getPF,f=e.match(/ipad|ipod|android|nintendo|blackberry|freebsd|openbsd/i);return f instanceof Array?f[0]:/os\/2|pocket pc|win16|win32|win64|wince/.test(e)?/windows ce|windows mobile|windows phone|zunewp|xblwp|iemobile|windows nt 6.[23]; arm/.test(d)?'wp':'windows':/arm/.test(e)?/windows phone|iemobile/.test(d)?'wp':/android/.test(d)?'android':'arm':/linux/.test(e)?/cros/.test(d)?'chromeos':/(?=.*windows)(?=.*mxbrowser)|android/.test(d)?'android':/iphone|pike/.test(d)?'iphone':/ipad/.test(d)?'ipad':/ipod/.test(d)?'ipod':'linux':/iphone|pike/.test(e)?'iphone':/mac|macintel|macintosh|macppc|mac68k/.test(e)?'mac':/x11|hp\-ux/.test(e)?'unix':/sunos/.test(e)?'solaris':/playstation|psp/.test(e)?'playstation':/palmos|webos/.test(e)?'palm':/s60|symbian|\\bseries\\b/.test(e)?'symbian':'unknown'},getOSName:function getOSName(){console.log('hi');var d=this.getUA,e=this.res.getPlatform;return /iphone|ipad|ipod/.test(e)?'iOS':'windows'===e&&/windows nt/.test(d)?'Windows':'Linux'===e?/centos/.test(d)?'CentOS':/ubuntu/.test(d)?'Ubuntu':e:e},getOSVersion:function getOSVersion(){var d=this.getUA,e=this.res.getPlatform,f=/mac|ios/.test(e)?/[\d_]*/g:/[\d\.]*/g,g=this.res.getOSName;g='wp'===g?/windows ce.*(ppc|smartphone|mobile|[0-9]{3}x[0-9]{3})|window mobile|windows phone [0-9.]+|wce;/.test(d)?'windows mobile':'windows phone':'ipad'===e||/ipad/.test(d)?'cpu os':'iphone'===e||/iphone/.test(d)?'iphone os':'ipod'===e||/ipod/.test(d)?'ipod os':'mac'===g?'mac os x':'chromeos'===g?'cros i686':g;var h=g.length,j=d.substr(d.indexOf(g)+h+1,10);return j=j.match(f)[0],j.replace(/[_]+/g,'.')},getBrowserName:function getBrowserName(){var d=this.res.getBrowserWithCoreName,e=d.origin;return{name:e,origin:this.originClasses,classes:d.full}},getBrowserFullVersion:function getBrowserFullVersion(){var d=this.res.getBrowserVersionByName;return+d.full?d.full:'unknown'},getDevice:function getDevice(){var f,d=this.getUA,e=this.res.getPlatform;return f=d.match(/mobile|tablet|phone|android/)?'mobile':'android'===e?'mobile':'desktop',f},getOrientation:function getOrientation(){var d=this.docSize.width(),e=this.docSize.height(),f=d>=e?'landscape':'portrait';return window.orientation&&(f=90===Math.abs(window.orientation)?'landscape':'portrait'),f},isInApp:function isInApp(){return!!/line|fbav|kakaotalk|micromessenger|twitter|beetalk/.test(this.getUA)&&this.getOSName()},isWebView:function isWebView(){var d=this.getUA,e=!!/cordova|phonegap|react|nodejs|webview/.test(d);return e&&(-1==d.indexOf('ios')?-1!=d.indexOf('android')&&(e='android'):e='ios'),e},getBreakpointRange:function getBreakpointRange(){var d=this.breakpoints,e=this.docSize.width();return e>=d.xs&&e<d.sm?'xs':e>=d.sm&&e<d.md?'sm':e>=d.md&&e<d.lg?'md':e>=d.lg&&e<d.xl?'lg':'xl'},cookies:{isEnabled:function isEnabled(){var d=navigator.cookieEnabled;return d||(document.cookie='testcookie',d=-1<document.cookie.indexOf('testcookie')),d},get:function get(){for(var e,f='urbrowser=',g=document.cookie.split(';'),h=[],d=0;d<g.length;d++){for(e=g[d];' '===e.charAt(0);)e=e.substring(1);0===e.indexOf(f)&&h.push(e.substring(f.length,e.length))}return!!(0<h.length)&&h},set:function set(d,e){var f=this;if(f.isEnabled()){f.remove();var g=0<d.length,h='urbrowser='+d,j=g?365:-1,k=location.protocol,l=/([\d]{1,3}\.){1,3}([\d]{1,3})|\:*1/.test(window.location.hostname),m=l?window.location.hostname:a.script.getAttribute('data-domain')||window.location.hostname;j=new Date(new Date().getTime()+8.64e7*j),h+='; expires='+j.toUTCString()+'; domain='+m+'; path=/',document.cookie=h,e&&/^http/.test(k)&&!a.isBuiltInApp&&!f.get()&&location.reload()}else console.log('Please open browser cookie.')},remove:function remove(){document.cookie='urbrowser=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/'},rebuild:function rebuild(d){this.remove(),d=JSON.stringify(d),this.set(d,!0)}},storage:{get:function get(){var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:'string',e=localStorage.getItem('urbrowser');return'json'===d?JSON.parse(e):e},set:function set(d,e){var f=a.script.getAttribute('data-reload');e=!!f&&!('true'!==f)&&e,localStorage.removeItem('urbrowser'),d?(d=JSON.stringify(d),localStorage.setItem('urbrowser',d),a.cookies.set(d,e)):(localStorage.removeItem(),a.cookies.remove())},reset:function reset(d){var e=a.script.getAttribute('data-reload');localStorage.removeItem('urbrowser'),a.cookies.remove(),d=JSON.stringify(d),localStorage.setItem('urbrowser',d),a.cookies.set(d,!e||!('true'!==e))}}},b={project:{name:'urBrowser',version:'4.0.3b',author:'Kei Cheng',github:'https://github.com/keicheng/urbrowser',website:'http://urbrowser.kule.tw',facebook:'https://www.facebook.com/kule.tw',cdnjs:'https://cdnjs.com/libraries/kule.lazy',license:'MIT License'},init:function init(){var d=a.cache;a.res.getBreakpointRange=a.getBreakpointRange(),a.res.getOrientation=a.getOrientation();var e=a.res;return d.project=this.project.name,d.version=this.project.version,d.author=this.project.author,d.getNameByAgent=e.getNameByAgent,d.getPlatform=e.getPlatform,d.getBrowserWithCoreName=e.getBrowserWithCoreName,d.getOSName=e.getOSName,d.getBrowserName=e.getBrowserName,d.getBrowserVersion=e.getBrowserVersionByName,d.getDevice=e.getDevice,d.getOrientation=e.getOrientation,d.isInApp=e.isInApp,d.isWebView=e.isWebView,d.getBreakpointRange=e.getBreakpointRange,d.classes=[],d.classes.push(e.getDevice),d.classes.push(e.getBrowserName.classes),e.isInApp&&d.classes.push('inApp'),e.isWebView&&d.classes.push('isWebview'),d.classes=d.classes.join(' '),d},buildBase:function buildBase(d){var e=a.root;d=d||this.init(),e.id=d.getPlatform,e.className=(a.originClasses?a.originClasses+' ':'')+d.classes,e.setAttribute('data-browser-name',d.getBrowserName.name),e.setAttribute('data-browser-version',d.getBrowserVersion.int),e.setAttribute('data-browser-core',d.getBrowserWithCoreName.core),e.setAttribute('data-os-name',d.getOSName),e.setAttribute('data-device',d.getDevice),e.setAttribute('data-bp',d.getBreakpointRange),e.setAttribute('data-inapp',d.isInApp),e.setAttribute('data-webview',d.isWebView),e.setAttribute('data-ub-version',d.version)},build:function build(d,e){d=d||this.init(),e=e||!0,this.buildBase(d),a.storage.set(d,e)},rebuild:function rebuild(){var d=this.init();this.buildBase(d),a.storage.reset(d,!0)},update:function update(){var d=a.storage.get('urbrowser'),e=this.init(),f=!1;d&&d.getBreakpointRange&&d.getBreakpointRange===e.getBreakpointRange&&d.getBrowserVersion.int&&d.getBrowserVersion.int===e.getBrowserVersion.int||(f=!0),f&&(a.cache=e,this.build(e,f))},diff:function diff(d){var e=a.storage.get(),f=d||a.cookies.get()[0],g=JSON.stringify(this.init());return e!=g||f!=g},resizing:function resizing(){var d=0<arguments.length&&arguments[0]!==void 0&&arguments[0],e=a.root,f=this.init();d||e.setAttribute('data-bp',f.getBreakpointRange),a.storage.set(f,d)},run:function run(){var d;if('undefined'==typeof window.addEventListener||'undefined'==typeof JSON||'undefined'==typeof localStorage)this.buildBase();else{var f=a.storage.get('json'),g=a.cookies.get();if(f){1<g.length&&(a.cookies.remove(),g=a.cookies.get()[0]);var h=this.diff(g);h?this.update():this.buildBase(f)}else this.build();window.addEventListener('resize',function(){clearTimeout(d),d=setTimeout(function(){b.resizing(!1)},150)},!1)}}};a.originClasses=a.root.className,a.res.getNameByAgent=a.getNameByAgent(),a.res.getBrowserVersionByName=a.getBrowserVersionByName(),a.res.getBrowserWithCoreName=a.getBrowserWithCoreName(),a.res.getPlatform=a.getPlatform(),a.res.getOSName=a.getOSName(),a.res.getOSVersion=a.getOSVersion(),a.res.getBrowserName=a.getBrowserName(),a.res.getBrowserFullVersion=a.getBrowserFullVersion(),a.res.getDevice=a.getDevice(),a.res.getOrientation=a.getOrientation(),a.res.getBreakpointRange=a.getBreakpointRange(),a.res.isInApp=a.isInApp(),a.res.isWebView=a.isWebView(),b.run()})(window);